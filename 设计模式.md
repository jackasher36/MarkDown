# 设计模式

## 单例模式

单例模式是一种设计模式，确保一个类只有一个实例，并提供全局访问点。它在许多应用场景中都非常有用。以下是一些常见的单例应用场景：

### 1. **配置管理**

- 在应用程序中，通常需要读取和管理配置文件。使用单例模式可以确保整个应用只加载一次配置，避免多次读取带来的开销。
- **示例**：使用单例类 `ConfigManager` 读取 `config.properties` 文件，确保整个应用程序只有一个配置实例。还有SqlsessionFactoryBuilder也是如此,

### 2. **日志管理**

- 日志管理器通常实现为单例，以确保所有日志记录都通过同一个实例进行，避免多个实例写入日志文件导致的混乱。
- **示例**：使用单例类 `Logger` 记录日志，确保所有日志输出通过同一实例。



### 3. **数据库连接池**

- 数据库连接池可以使用单例模式来管理连接资源，确保只有一个连接池实例来处理所有的数据库连接请求，提高性能和资源利用率。
- **示例**：使用单例类 `ConnectionPool` 管理数据库连接，确保连接的复用。

### 4. **线程池**

- 线程池管理也可以使用单例模式，确保应用程序中只有一个线程池实例，这样可以有效控制线程的使用和资源分配。
- **示例**：使用单例类 `ConnectionPool` 管理数据库连接，确保连接的复用。

### 5. **全局状态管理**

- 例如，在游戏或应用中，单例可以用来管理全局状态（如游戏配置、用户设置等），确保状态的一致性。
- **示例**：使用单例类 `GameSettings` 管理游戏的全局设置。

### 6. **事件调度器**

- 在事件驱动的应用程序中，事件调度器可以实现为单例，确保所有事件都通过同一个实例进行处理和分发。
- **示例**：使用单例类 `GameSettings` 管理游戏的全局设置。还有SpringMVC的DispatchServlet

### 7. **API 客户端**

- 对于外部服务的 API 客户端（如 RESTful API），可以使用单例模式来管理请求，确保只有一个实例负责与外部服务通信。Servlet就是单例的,所有servlet共享一个ServeletContext

### 8. **缓存管理**

- 缓存系统可以实现为单例，确保所有数据都通过同一个缓存实例进行存储和检索，以提高效率。

### 示例代码（Java）：

以下是一个简单的 Java 单例模式实现示例：

```
java


复制代码
public class Configuration {
    private static Configuration instance;

    private Configuration() {
        // 私有构造函数，防止外部实例化
    }

    public static synchronized Configuration getInstance() {
        if (instance == null) {
            instance = new Configuration();
        }
        return instance;
    }

    // 配置方法
    public void loadConfig() {
        // 加载配置逻辑
    }
}
```

### 总结

单例模式在许多需要确保全局唯一性和一致性的场景中都能发挥重要作用。通过合理使用单例模式，可以有效提高应用的性能、资源利用率和代码可维护性。